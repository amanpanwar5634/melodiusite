<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PG Details</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper@11/swiper-bundle.min.css" />
    <script src="https://unpkg.com/swiper@11/swiper-bundle.min.js"></script>
    <style>
        /* Custom styles matching the React app */
        :root {
            --luxury-cognac: #8B4513;
            --luxury-amber: #FFB000;
        }
        
        .text-luxury-cognac { color: var(--luxury-cognac); }
        .bg-luxury-cognac { background-color: var(--luxury-cognac); }
        .from-luxury-cognac { --tw-gradient-from: var(--luxury-cognac); }
        .to-luxury-amber { --tw-gradient-to: var(--luxury-amber); }
        .hover\:from-luxury-amber:hover { --tw-gradient-from: var(--luxury-amber); }
        .hover\:to-luxury-cognac:hover { --tw-gradient-to: var(--luxury-cognac); }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            animation: fadeIn 0.3s;
        }
        
        .modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            max-width: 28rem;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        /* Gallery styles */
        .gallery-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.9);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
        }
        
        .gallery-content {
            max-width: 90%;
            max-height: 90%;
            position: relative;
        }
        
        .gallery-content img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
        
        .gallery-nav {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
        }
        
        .gallery-nav:hover {
            background: rgba(255,255,255,0.3);
        }
        
        .gallery-prev { left: -60px; }
        .gallery-next { right: -60px; }
        
        .gallery-close {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            color: white;
            font-size: 30px;
            cursor: pointer;
        }
        
        /* Form styles */
        .form-group {
            margin-bottom: 1rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: #374151;
        }
        
        .form-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            background-color: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--luxury-cognac);
            box-shadow: 0 0 0 3px rgba(139, 69, 19, 0.1);
        }
        
        .select-input {
            width: 100%;
            padding: 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            background-color: white;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6,9 12,15 18,9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 0.75rem center;
            background-size: 1em;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white shadow-sm z-50">
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center">
                    <h1 class="text-2xl font-bold text-luxury-cognac">GharPayy</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <a href="/marketplace.html" class="text-gray-700 hover:text-luxury-cognac">Marketplace</a>
                    <button class="bg-gradient-to-r from-luxury-cognac to-luxury-amber text-white px-4 py-2 rounded-lg">Sign In</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="container mx-auto px-4 pt-24 pb-16">
        <div class="max-w-6xl mx-auto">
            <!-- Loading State -->
            <div id="loading" class="animate-pulse space-y-6">
                <div class="h-64 bg-gray-200 rounded-lg"></div>
                <div class="h-8 bg-gray-200 rounded w-3/4"></div>
                <div class="h-4 bg-gray-200 rounded w-1/2"></div>
            </div>

            <!-- Error State -->
            <div id="error" class="text-center hidden">
                <p class="text-red-500 mb-4">PG not found or failed to load.</p>
                <button onclick="window.history.back()" class="bg-gradient-to-r from-luxury-cognac to-luxury-amber text-white px-4 py-2 rounded-lg">
                    Back to Marketplace
                </button>
            </div>

            <!-- PG Details -->
            <div id="pg-details" class="hidden">
                <!-- Back Button -->
                <button onclick="window.history.back()" class="mb-6 text-luxury-cognac hover:text-luxury-amber flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                    </svg>
                    Back
                </button>

                <!-- Image Gallery -->
                <div class="relative aspect-[2/1] overflow-hidden rounded-2xl mb-8">
                    <img id="main-image" class="w-full h-full object-cover cursor-pointer" onclick="openGallery(0)" />
                    
                    <!-- Image Gallery Button -->
                    <button onclick="openGallery(0)" class="absolute bottom-4 right-4 bg-white/90 hover:bg-white px-4 py-2 rounded-lg flex items-center gap-2">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                            <circle cx="8.5" cy="8.5" r="1.5"></circle>
                            <polyline points="21,15 16,10 5,21"></polyline>
                        </svg>
                        View Photos
                    </button>
                    
                    <!-- Wishlist Button -->
                    <button onclick="toggleWishlist()" class="absolute bottom-4 left-4 bg-white/90 hover:bg-white px-4 py-2 rounded-lg flex items-center gap-2">
                        <svg id="heart-icon" class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 000-6.364 4.5 4.5 0 00-6.364 0L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"></path>
                        </svg>
                        <span id="wishlist-text">Save</span>
                    </button>
                </div>

                <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                    <!-- Left Column - Main Content -->
                    <div class="lg:col-span-2 space-y-8">
                        <!-- Header -->
                        <div class="space-y-4">
                            <div class="flex items-start justify-between">
                                <div>
                                    <h1 id="pg-name" class="text-3xl font-bold mb-2"></h1>
                                    <div class="flex items-center gap-2 text-gray-600 mb-4">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                                        </svg>
                                        <span id="pg-location"></span>
                                    </div>
                                </div>
                                <div class="flex gap-2">
                                    <span class="bg-green-500 text-white px-3 py-1 rounded-full text-sm">✓ VERIFIED</span>
                                    <span id="pg-gender" class="bg-gray-200 text-gray-700 px-3 py-1 rounded-full text-sm"></span>
                                </div>
                            </div>

                            <div class="flex items-center gap-6">
                                <div class="flex items-center gap-1" id="rating-container">
                                    <!-- Stars will be populated by JS -->
                                </div>
                                <div class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"></path>
                                    </svg>
                                    <span id="room-type" class="text-sm"></span>
                                </div>
                            </div>
                        </div>

                        <!-- Description -->
                        <div class="bg-white rounded-lg p-6 shadow-sm">
                            <h3 class="text-xl font-semibold mb-4">About this PG</h3>
                            <p id="pg-description" class="text-gray-600"></p>
                        </div>

                        <!-- Features/Amenities -->
                        <div class="bg-white rounded-lg p-6 shadow-sm">
                            <h3 class="text-xl font-semibold mb-4">Features & Facilities</h3>
                            <div id="features-container" class="grid grid-cols-2 md:grid-cols-3 gap-4">
                                <!-- Features will be populated by JS -->
                            </div>
                        </div>

                        <!-- Property Details -->
                        <div class="bg-white rounded-lg p-6 shadow-sm">
                            <h3 class="text-xl font-semibold mb-4">Property Details</h3>
                            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                                <div class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"></path>
                                    </svg>
                                    <div>
                                        <p class="text-sm text-gray-600">Property Type</p>
                                        <p class="font-medium">PG/Hostel</p>
                                    </div>
                                </div>
                                <div class="flex items-center gap-2">
                                    <svg class="w-4 h-4 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10v11M20 10v11"></path>
                                    </svg>
                                    <div>
                                        <p class="text-sm text-gray-600">Furnishing</p>
                                        <p class="font-medium">Fully Furnished</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Reviews -->
                        <div class="bg-white rounded-lg p-6 shadow-sm">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-semibold">Reviews</h3>
                                <button onclick="openReviewModal()" class="text-luxury-cognac hover:text-luxury-amber">Write Review</button>
                            </div>
                            <p class="text-gray-600 text-center py-8">No reviews yet. Be the first to review!</p>
                        </div>
                    </div>

                    <!-- Right Column - Booking Card -->
                    <div class="space-y-6">
                        <div class="bg-white rounded-lg p-6 shadow-sm sticky top-32">
                            <div class="space-y-2 mb-6">
                                <div class="flex items-baseline gap-2">
                                    <span id="pg-rent" class="text-3xl font-bold text-luxury-cognac"></span>
                                    <span class="text-gray-600">/month</span>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="grid grid-cols-2 gap-3">
                                    <button onclick="openBookingModal()" class="bg-gradient-to-r from-luxury-cognac to-luxury-amber hover:from-luxury-amber hover:to-luxury-cognac text-white px-4 py-3 rounded-lg font-medium">
                                        Book Now
                                    </button>
                                    <button onclick="openVisitModal()" class="border border-gray-300 text-gray-700 px-4 py-3 rounded-lg font-medium hover:bg-gray-50">
                                        Schedule Visit
                                    </button>
                                </div>
                                
                                <!-- WhatsApp Button -->
                                <button onclick="openWhatsApp()" class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-3 rounded-lg font-medium flex items-center justify-center gap-2">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                                        <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893A11.821 11.821 0 0020.885 3.488"/>
                                    </svg>
                                    WhatsApp
                                </button>
                                
                                <div class="border-t pt-4">
                                    <div class="flex items-center gap-2 text-sm text-gray-600">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                                        </svg>
                                        <span>Zero brokerage • Verified property</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Image Gallery Modal -->
    <div id="gallery-overlay" class="gallery-overlay">
        <div class="gallery-content">
            <button class="gallery-close" onclick="closeGallery()">&times;</button>
            <button class="gallery-nav gallery-prev" onclick="prevImage()">‹</button>
            <img id="gallery-image" src="" alt="Gallery Image" />
            <button class="gallery-nav gallery-next" onclick="nextImage()">›</button>
        </div>
    </div>

    <!-- Booking Modal -->
    <div id="booking-modal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Book Now</h2>
                <button onclick="closeBookingModal()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <p class="text-gray-600 mb-6">Fill in your details to complete the booking</p>
            
            <form id="booking-form" onsubmit="submitBooking(event)">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" name="guest_name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" name="guest_email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" name="guest_phone" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Move-in Date</label>
                    <input type="date" class="form-input" name="move_in_date" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Duration (months)</label>
                    <select class="select-input" name="duration_months" required>
                        <option value="">Select duration</option>
                        <option value="1">1 month</option>
                        <option value="2">2 months</option>
                        <option value="3">3 months</option>
                        <option value="6">6 months</option>
                        <option value="12">12 months</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Special Requests (Optional)</label>
                    <textarea class="form-input" name="special_requests" rows="3" placeholder="Any special requirements..."></textarea>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-luxury-cognac to-luxury-amber hover:from-luxury-amber hover:to-luxury-cognac text-white px-4 py-3 rounded-lg font-medium">
                    Proceed to Payment
                </button>
            </form>
        </div>
    </div>

    <!-- Visit Modal -->
    <div id="visit-modal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Schedule a Visit</h2>
                <button onclick="closeVisitModal()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            <p class="text-gray-600 mb-6">Plan a visit to see the property in person</p>
            
            <form id="visit-form" onsubmit="submitVisit(event)">
                <div class="form-group">
                    <label class="form-label">Full Name</label>
                    <input type="text" class="form-input" name="visitor_name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" name="visitor_email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Phone</label>
                    <input type="tel" class="form-input" name="visitor_phone" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Visit Date</label>
                    <input type="date" class="form-input" name="visit_date" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Preferred Time</label>
                    <select class="select-input" name="visit_time" required>
                        <option value="">Select time slot</option>
                        <option value="10:00">10:00 AM</option>
                        <option value="11:00">11:00 AM</option>
                        <option value="12:00">12:00 PM</option>
                        <option value="14:00">2:00 PM</option>
                        <option value="15:00">3:00 PM</option>
                        <option value="16:00">4:00 PM</option>
                        <option value="17:00">5:00 PM</option>
                    </select>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-luxury-cognac to-luxury-amber hover:from-luxury-amber hover:to-luxury-cognac text-white px-4 py-3 rounded-lg font-medium">
                    Schedule Visit
                </button>
            </form>
        </div>
    </div>

    <!-- Review Modal -->
    <div id="review-modal" class="modal">
        <div class="modal-content">
            <div class="flex items-center justify-between mb-4">
                <h2 class="text-xl font-semibold">Write a Review</h2>
                <button onclick="closeReviewModal()" class="text-gray-500 hover:text-gray-700">&times;</button>
            </div>
            
            <form id="review-form" onsubmit="submitReview(event)">
                <div class="form-group">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-input" name="reviewer_name" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-input" name="reviewer_email" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Rating</label>
                    <div class="flex gap-1 mb-2">
                        <button type="button" class="star-rating" data-rating="1">★</button>
                        <button type="button" class="star-rating" data-rating="2">★</button>
                        <button type="button" class="star-rating" data-rating="3">★</button>
                        <button type="button" class="star-rating" data-rating="4">★</button>
                        <button type="button" class="star-rating" data-rating="5">★</button>
                    </div>
                    <input type="hidden" name="rating" id="review-rating" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Review</label>
                    <textarea class="form-input" name="comment" rows="4" placeholder="Share your experience..." required></textarea>
                </div>
                
                <button type="submit" class="w-full bg-gradient-to-r from-luxury-cognac to-luxury-amber hover:from-luxury-amber hover:to-luxury-cognac text-white px-4 py-3 rounded-lg font-medium">
                    Post Review
                </button>
            </form>
        </div>
    </div>

    <script>
        let currentPG = null;
        let galleryImages = [];
        let currentImageIndex = 0;
        let isInWishlist = false;

        // Get PG ID from URL
        function getPGId() {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('id');
        }

        // Load PG data from JSON
        async function loadPGData() {
            try {
                const response = await fetch('./pg.json');
                const pgs = await response.json();
                const pgId = parseInt(getPGId());
                
                currentPG = pgs.find(pg => pg.id === pgId);
                
                if (!currentPG) {
                    showError();
                    return;
                }
                
                displayPGData();
            } catch (error) {
                console.error('Error loading PG data:', error);
                showError();
            }
        }

        function showError() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error').style.display = 'block';
        }

        function displayPGData() {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('pg-details').style.display = 'block';
            
            // Update page title
            document.title = `${currentPG.name} - PG Details`;
            
            // Basic info
            document.getElementById('pg-name').textContent = currentPG.name;
            document.getElementById('pg-location').textContent = currentPG.location;
            document.getElementById('pg-gender').textContent = currentPG.category.toUpperCase();
            document.getElementById('pg-description').textContent = currentPG.description;
            
            // Main image
            document.getElementById('main-image').src = currentPG.images[0];
            document.getElementById('main-image').alt = currentPG.name;
            
            // Store images for gallery
            galleryImages = currentPG.images;
            
            // Features
            const featuresContainer = document.getElementById('features-container');
            featuresContainer.innerHTML = '';
            currentPG.features.forEach(feature => {
                const featureDiv = document.createElement('div');
                featureDiv.className = 'flex items-center gap-2';
                featureDiv.innerHTML = `
                    <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                    <span class="text-sm">${feature}</span>
                `;
                featuresContainer.appendChild(featureDiv);
            });
        }

        // Gallery functions
        function openGallery(index) {
            currentImageIndex = index;
            document.getElementById('gallery-image').src = galleryImages[currentImageIndex];
            document.getElementById('gallery-overlay').style.display = 'flex';
        }

        function closeGallery() {
            document.getElementById('gallery-overlay').style.display = 'none';
        }

        function nextImage() {
            currentImageIndex = (currentImageIndex + 1) % galleryImages.length;
            document.getElementById('gallery-image').src = galleryImages[currentImageIndex];
        }

        function prevImage() {
            currentImageIndex = (currentImageIndex - 1 + galleryImages.length) % galleryImages.length;
            document.getElementById('gallery-image').src = galleryImages[currentImageIndex];
        }

        // Wishlist functions
        function toggleWishlist() {
            isInWishlist = !isInWishlist;
            const heartIcon = document.getElementById('heart-icon');
            const wishlistText = document.getElementById('wishlist-text');
            
            if (isInWishlist) {
                heartIcon.style.fill = '#ef4444';
                heartIcon.style.color = '#ef4444';
                wishlistText.textContent = 'Saved';
            } else {
                heartIcon.style.fill = 'none';
                heartIcon.style.color = '#6b7280';
                wishlistText.textContent = 'Save';
            }
        }

        // Modal functions
        function openBookingModal() {
            document.getElementById('booking-modal').classList.add('active');
        }

        function closeBookingModal() {
            document.getElementById('booking-modal').classList.remove('active');
        }

        function openVisitModal() {
            document.getElementById('visit-modal').classList.add('active');
        }

        function closeVisitModal() {
            document.getElementById('visit-modal').classList.remove('active');
        }

        function openReviewModal() {
            document.getElementById('review-modal').classList.add('active');
        }

        function closeReviewModal() {
            document.getElementById('review-modal').classList.remove('active');
        }

        // WhatsApp function
        function openWhatsApp() {
            if (currentPG && currentPG.whatsapp) {
                const message = encodeURIComponent(`Hi! I'm interested in ${currentPG.name} located in ${currentPG.location}. Can you provide more details about availability and booking process?`);
                window.open(`${currentPG.whatsapp}?text=${message}`, '_blank');
            }
        }

        // Form submissions
        function submitBooking(event) {
            event.preventDefault();
            alert('Booking request submitted! You will be contacted soon.');
            closeBookingModal();
        }

        function submitVisit(event) {
            event.preventDefault();
            alert('Visit scheduled successfully! You will receive a confirmation.');
            closeVisitModal();
        }

        function submitReview(event) {
            event.preventDefault();
            alert('Review submitted successfully!');
            closeReviewModal();
        }

        // Star rating for reviews
        document.addEventListener('DOMContentLoaded', function() {
            const starButtons = document.querySelectorAll('.star-rating');
            starButtons.forEach((star, index) => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.rating);
                    document.getElementById('review-rating').value = rating;
                    
                    starButtons.forEach((s, i) => {
                        if (i < rating) {
                            s.style.color = '#ffd700';
                        } else {
                            s.style.color = '#d1d5db';
                        }
                    });
                });
            });
        });

        // Close modals when clicking outside
        window.addEventListener('click', function(event) {
            const modals = document.querySelectorAll('.modal');
            modals.forEach(modal => {
                if (event.target === modal) {
                    modal.classList.remove('active');
                }
            });
            
            if (event.target === document.getElementById('gallery-overlay')) {
                closeGallery();
            }
        });

        // Load data when page loads
        window.addEventListener('DOMContentLoaded', loadPGData);
    </script>
</body>
</html>